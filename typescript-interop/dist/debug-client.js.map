{"version":3,"sources":["../src/debug-client.ts"],"sourcesContent":["#!/usr/bin/env node\n\n// Simple test to see what the official Cap'n Web client actually sends\n\nasync function debugRequest() {\n    console.log('üîç Debugging Cap\\'n Web Client Request\\n');\n\n    // Manually construct what we think the client should send\n    const requestBody = [\n        [\"push\", [\"import\", 0, [\"add\"], [5, 3]]]\n    ];\n\n    console.log('üì§ Sending request:');\n    console.log(JSON.stringify(requestBody, null, 2));\n\n    try {\n        const response = await fetch('http://localhost:8080/rpc/batch', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(requestBody),\n        });\n\n        console.log('\\nüì• Response:');\n        console.log(`Status: ${response.status} ${response.statusText}`);\n        console.log('Headers:', Object.fromEntries(response.headers.entries()));\n\n        const responseBody = await response.text();\n        console.log('Body:', responseBody);\n\n        if (response.ok) {\n            try {\n                const parsed = JSON.parse(responseBody);\n                console.log('\\nParsed response:', JSON.stringify(parsed, null, 2));\n            } catch (e) {\n                console.log('Could not parse as JSON');\n            }\n        }\n\n    } catch (error) {\n        console.error('Request failed:', error);\n    }\n}\n\ndebugRequest();"],"mappings":";;;AAIA,eAAe,eAAe;AAC1B,UAAQ,IAAI,gDAA0C;AAGtD,QAAM,cAAc;AAAA,IAChB,CAAC,QAAQ,CAAC,UAAU,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAAA,EAC3C;AAEA,UAAQ,IAAI,4BAAqB;AACjC,UAAQ,IAAI,KAAK,UAAU,aAAa,MAAM,CAAC,CAAC;AAEhD,MAAI;AACA,UAAM,WAAW,MAAM,MAAM,mCAAmC;AAAA,MAC5D,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,MACpB;AAAA,MACA,MAAM,KAAK,UAAU,WAAW;AAAA,IACpC,CAAC;AAED,YAAQ,IAAI,uBAAgB;AAC5B,YAAQ,IAAI,WAAW,SAAS,MAAM,IAAI,SAAS,UAAU,EAAE;AAC/D,YAAQ,IAAI,YAAY,OAAO,YAAY,SAAS,QAAQ,QAAQ,CAAC,CAAC;AAEtE,UAAM,eAAe,MAAM,SAAS,KAAK;AACzC,YAAQ,IAAI,SAAS,YAAY;AAEjC,QAAI,SAAS,IAAI;AACb,UAAI;AACA,cAAM,SAAS,KAAK,MAAM,YAAY;AACtC,gBAAQ,IAAI,sBAAsB,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,MACrE,SAAS,GAAG;AACR,gBAAQ,IAAI,yBAAyB;AAAA,MACzC;AAAA,IACJ;AAAA,EAEJ,SAAS,OAAO;AACZ,YAAQ,MAAM,mBAAmB,KAAK;AAAA,EAC1C;AACJ;AAEA,aAAa;","names":[]}